<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0,user-scalable=no" />
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<title>萧朗先生</title>
		<style type="text/css">
			body
			{
				margin:0;
				padding:0;
				overflow-x:hidden;
				font:300 12px/1.5 arial,tahoma,sans-serif;
			}
			#topbar
			{
				width:100%;
				height:44px;
				background:#f2f2f2;
				position:fixed;
				z-index:9999;
				top:0;
				border-bottom:1px solid #d9d9d9;
				-webkit-text-size-adjust:none;
				display:-webkit-box;
			}
			#topbar a
			{
				display:block;
				color:#666;
				cursor:pointer;
			}
			#topbar a.home
			{
				width:111px;
				height:100%;
				font-size:16px;
				border-right:1px solid #e0e0e0;
				text-decoration:none;
				text-shadow:none;
				background:#f2f2f2;
				position:relative;
				z-index:10000;
			}
			#topbar span.home_pic
			{
				display:inline-block;
				width:20px;
				height:18px;
				background-position:0 0;
				background:url('images/topbar.png');
				-webkit-background-size:20px 90px;
				background-size:20px 90px;
				vertical-align:middle;
				margin-left:10px;
				margin-top:7px;
			}
			#topbar span.home_word
			{
				margin-top:11px;
				vertical-align:middle;
				padding-left:3px;
				font-weight:bold;
				display:inline-block;
			}
			#topbar div.tools
			{
				height:44px;
				overflow:hidden;
				-webkit-box-flex:1;
				position:relative;
			}
			#topbar .tools a.btn
			{
				float:right;
				display:inline-block;
				height:100%;
				padding:0 14px;
			}
			#topbar div.nav
			{
				width:200px;
				height:100%;
				position:relative;
				margin-left:-200px;
				opacity:0;
				z-index:9999;
				font-size:16px;
				font-weight:700;
				border-left:1px solid #fafafa;
				text-shadow:none;
				text-align:center;
			}
			#topbar div.nav a
			{
				display:inline-block;
				height:100%;
				width:65px;
				float:left;
			}
			#topbar div.nav a span
			{
				margin-top:11px;
				display:inline-block;
			}
			#topbar div.nav a.active
			{
				background:#ddd;
			}
			.tools .btn span
			{
				width:20px;
				height:20px;
				border:0;
				padding:0;
				margin-top:13px;
				display:block;
				background:url('images/topbar.png');
				-webkit-background-size:20px 90px;
				background-size:20px 90px;
			}
			#index span
			{
				background-position: 0 -24px;
			}
			#settings span
			{
				background-position: 0 -46px;
			}
			#ul_index
			{
				font-size:16px;
				font-weight:700;
				color:#fff;
			}
			#ul_index li
			{
				line-height:42px;
				cursor:pointer;
			}
			#settings_page
			{
				margin-top:45px;
				font-size:16px;
				font-weight:700;
			}
			#settings_page label
			{
				float:left;
				line-height:50px;
				font-size:16px;
				font-weight:700;
				padding-right:30px;
			}
			#main_page.hidden
			{
				visibility:hidden;
			}
			#main_page .album_cell
			{
				margin-bottom:30px;
			}
			#main_page .album_date
			{
				width:70px;
				height:90px;
				font-size:22px;
				font-weight:700;
				line-height:22px;
				float:left;
			}
			#main_page .album_date span
			{
				font-size:12px;
			}
			#main_page .album_pic
			{
				width:90px;
				height:90px;
				float:left;
				margin-right:10px;
				background-size:cover;
				background-position:center center;
				cursor:pointer;
			}
			#main_page .album_text
			{
				height:90px;
				font-size:12px;
			}
			#main_page div.album_bottom
			{
				text-align:center;
			}
			#album_list
			{
				padding:30px 5px 20px 5px;
			}
			#album_show
			{
				display:none;
			}
			div.ui-content
			{
				padding:0;
				background:#fff;
				min-height:inherit;
			}
			#album_show_box
			{
				position:fixed;
				z-index:-1;
				top:0;
				left:0;
				width:100%;
				height:100%;
				background:#000;
				display:table-cell;
				vertical-align:middle;
				text-align:center;
			}
			#album_show_box.show
			{
				z-index:10010;
			}
			#album_show_pic
			{
				vertical-align:middle;
			}
			#album_show_cell
			{
				display:table-cell;
				vertical-align:middle;
				text-align:center;
				overflow:visible;
			}
			#album_show_top
			{
				width:100%;
				height:44px;
				background:#333;
				opacity:0.5;
				position:fixed;
				top:0;
				left:0;
				border-bottom:1px solid #000;
			}
			#show_top_back
			{
				float:left;
				font-size:16px;
				font-weight:700;
				color:#fff;
				width:111px;
				line-height:44px;
				border-right:1px solid #000;
				cursor:pointer;
				position:relative;
			}
			#show_top_date
			{
				border-left:1px solid #666;
				float:left;
				line-height:44px;
				width:100%;
				margin-left:-115px;
				font-size:16px;
				font-weight:700;
				color:#fff;
			}
			#show_top_date span
			{
				font-size:12px;
			}
			#album_show_bottom
			{
				width:100%;
				height:44px;
				background:#333;
				opacity:0.5;
				position:fixed;
				bottom:0;
				left:0;
				border-top:1px solid #000;
				padding:5px;
				font-size:12px;
				color:#fff;
				text-align:left;
			}
		</style>
		<link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
		<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
		<script src="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
	</head>
	<body>
		<div id="album_show_box">
			<div id="album_show_cell">
				<img id="album_show_pic" />
			</div>
			<div id="album_show_top">
				<span id="show_top_back">返回相册</span>
				<span id="show_top_date"></span>
			</div>
			<div id="album_show_bottom"></div>
		</div>
		<div id="page_box">
			<div id="topbar">
				<a class="home" id="home">
					<span class="home_pic"></span>
					<span class="home_word">个人中心</span>
				</a>
				<div class="nav" id="navigator">
					<a id="profile">
						<span>主页</span>
					</a>
					<a id="album">
						<span>相册</span>
					</a>
					<a id="message">
						<span>留言</span>
					</a>
				</div>
				<div class="tools" id="tools">
					<a class="btn" id="settings">
						<span></span>
					</a>
					<a class="btn" id="index">
						<span></span>
					</a>
				</div>
			</div>
			<div data-role="page" id="home_page" style="margin-top:45px;">
				<div data-role="content">
					<div id="main_page"></div>
				</div>
				<div data-role="panel" id="index_panel" data-theme="a" data-display="reveal" data-position="right" data-swipe-close="false" data-dismissible="false">
					<div class="panel-content">
						<ul id="ul_index">
							<li>名片</li>
							<li>个人简介</li>
							<li>人物性格</li>
							<li>生活习惯</li>
							<li>兴趣爱好</li>
							<li>生平愿望</li>
							<li>家庭成员</li>
							<li>温馨故事</li>
							<li>寄托</li>
						</ul>
					</div>
				</div>
			</div>
			<div data-role="page" id="settings_page" data-close-btn="none">
				<div data-role="header">
					<h2>页面设置</h2>
				</div>
				<div data-role="content">
					<div data-role="content">
						<label for="flip-0">夜间模式：</label>
						<select name="flip-0" id="flip-0" data-role="slider"  data-theme="a">
							<option value="off">关</option>
							<option value="on">开</option>
						</select>
					</div>
					<div data-role="content">
						<label for="flip-0">字体大小：</label>
						<select name="flip-0" id="flip-0" data-role="slider"  data-theme="a">
							<option value="off">小</option>
							<option value="on">大</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			function openIndex() {
				window.index_state = true;
				$("#index").css("background", "#bbb");
				$("#settings").css("opacity", "0.3");
				$("#home").css("opacity", "0.3");
				$("#index_panel").panel("open");
			}
			function closeIndex() {
				window.index_state = false;
				$("#index").css("background", "");
				$("#settings").css("opacity", "1");
				$("#home").css("opacity", "1");
				$("#index_panel").panel("close");
			}
			function openSettings() {
				window.settings_state = true;
				$("#settings").css("background", "#bbb");
				$("#index").css("opacity", "0.3");
				$("#home").css("opacity", "0.3");
				$.mobile.changePage("#settings_page", {role:"dialog"});
			}
			function closeSettings() {
				window.settings_state = false;
				$("#settings").css("background", "");
				$("#index").css("opacity", "1");
				$("#home").css("opacity", "1");
				$("#settings_page").dialog("close");
			}
			function openHome() {
				window.home_state = true;
				$("#home").css("background", "#bbb");
				$("#navigator").css("opacity", "1");
				if (window.profile_state) {
					$("#profile").addClass("active");
				} else if (window.album_state) {
					$("#album").addClass("active");
				} else if (message_state) {
					$("#message_state").addClass("active");
				}
				$("#navigator").animate({
					"margin-left": 0
				});
				$("#tools").animate({
					"left": "200px"
				});
			}
			function closeHome() {
				window.home_state = false;
				$("#home").css("background", "");
				$("#navigator").animate({
					"margin-left": "-200px"
				});
				$("#tools").animate({
					"left": 0
				}, function () {
					$("#navigator").css("opacity", "0");
				});
			}
			function openAlbum() {
				window.profile_state = false;
				window.album_state = true;
				window.message_state = false;
				$("#album").addClass("active");
				$("#main_page").addClass("hidden");
				$("#index").css("display", "none");
				$("#profile").removeClass("active");
				$("#message").removeClass("active");
				window.loading_state = true;
				$("#settings").css("opacity", "0.3");
				$.mobile.showPageLoadingMsg( "a", "正在加载相册", false );
				loadAlbum();
			}
			function openMessage() {
				window.profile_state = false;
				window.album_state = false;
				window.message_state = true;
				$("#message").addClass("active");
				$("#index").css("display", "none");
				$("#profile").removeClass("active");
				$("#album").removeClass("active");
				window.loading_state = true;
				$("#settings").css("opacity", "0.3");
				$.mobile.showPageLoadingMsg( "a", "正在加载留言", false );
			}
			function openProfile() {
				window.profile_state = true;
				window.album_state = false;
				window.message_state = false;
				$("#profile").addClass("active");
				$("#main_page").addClass("hidden");
				$("#index").css("display", "");
				$("#message").removeClass("active");
				$("#album").removeClass("active");
				window.loading_state = true;
				$("#index").css("opacity", "0.3");
				$("#settings").css("opacity", "0.3");
				$.mobile.showPageLoadingMsg( "a", "正在加载主页", false );
				loadProfile();
			}
			function loadAlbum() {
				var str_html = ''
				+ '<div id="album_list">'
				+ 	img_html("2013", "images/1231231.jpg", "全家人一起在海河边吃烧烤。")
				+ 	img_html("2012", "images/201238yidbbi0i2n3y3ejf.jpg", "在提问环节中，主持人陈辰提问章子怡男友问题，章子怡顾左右而言他，被陈辰说“阅男无数”生气提前离席。")
				+ 	img_html("2010", "images/1888277.jpg", "章子怡应邀出席。派对上，章子怡与神秘外国男子贴耳热聊，俩人聊得十分投机。")
				+ 	img_html("2001", "images/01300000329092127364794228120.jpg", "猫头鹰趾高气昂的表情看起来非常滑稽，很难忍住不笑。")
				+ 	img_html("1997", "images/a35ae9ea122d7585d739c94d.jpg", "它们不会事先发出警示，突然就移动到任意一个方向，毫无规律，无法预测，相机对焦也很难。")
				+ 	img_html("1993", "images/162109-491.jpg", "不过这些猫头鹰绝对是我的最爱，拍摄它们我从来都不会厌烦。")
				+ 	img_html("1987", "images/W020080627294501098240.jpg", "照片中的猫头鹰在追踪猎物时颇有行军风范。")
				+ 	img_html("1987", "images/10037-4.jpg", "朝鲜平壤，金正恩携夫人李雪主在体育场观看男子足球比赛。")
				+ 	img_html("1985", "images/129888079.jpg", "伊朗马什哈德，人们托住被吊起来处决的男子，试图挽救他的生命。")
				+ 	img_html("1982", "images/2009121018362959243.jpg", "根据伊斯兰教法，受害者家人有权选择赦免还是处决罪犯。")
				+ 	img_html("1973", "images/a35ae9ea122d7585d739c94d.jpg", "英国伯克郡，英女王伊丽莎白二世一身村姑装扮参加温莎马展。她一会儿吐舌卖萌，一会儿神情狰狞，表情十分多变。")
				+ 	img_html("1958", "images/qlql085133104z.jpg", "俄罗斯莫斯科，一名总统卫队的士兵走过红场。")
				+ 	'<div class="album_bottom">...</div>'
				+ '</div>';
				$("#main_page")[0].innerHTML = str_html;
				$(".album_pic").click(function () {
					var tmp_h = $(window).height();
					var tmp_w = $(window).width();
					$("#album_show_pic").attr("src", this.style.backgroundImage.replace(/^url[(]|[)]$/g, ""));
					$("#show_top_date")[0].innerHTML = this.parentNode.children[0].innerHTML;
					$("#album_show_bottom")[0].innerHTML = this.parentNode.children[2].innerHTML;
					$("#album_show_cell").css({"height":55 + tmp_h + "px", "width":tmp_w + "px"});
					var size_rate = tmp_w/tmp_h;
					var pic_size_rate = $("#album_show_pic").width()/$("#album_show_pic").height();
					if (pic_size_rate > size_rate) {
						$("#album_show_pic").css({"height":"", "width":tmp_w + "px"});
					} else {
						$("#album_show_pic").css({"height":tmp_h + "px","width":""});
					}
					$.mobile.showPageLoadingMsg( "a", "正在加载照片", false );
					setTimeout(function () {
						$.mobile.hidePageLoadingMsg();
						$("#album_show_box").addClass("show");
						$("#page_box").css({"display":"none"});
					}, 500);
				});
				function img_html(date, pic, text) {
					var str = ''
					+ '<div class="album_cell">'
					+ 	'<div class="album_date">' + date + '<span>年</span></div>'
					+ 	'<div class="album_pic" style="background-image:url(' + pic + ');"></div>'
					+ 	'<div class="album_text">' + text + '</div>'
					+ '</div>';
					return str;
				}
				setTimeout(function () {
					$.mobile.hidePageLoadingMsg();
					$("#main_page").removeClass("hidden");
					$("#settings").css("opacity", "1");
					window.loading_state = false;
					closeHome();
				}, 2000);
			}
			function loadProfile() {
				var str_html = "";
				$("#main_page")[0].innerHTML = str_html;
				setTimeout(function () {
					$.mobile.hidePageLoadingMsg();
					$("#main_page").removeClass("hidden");
					$("#settings").css("opacity", "1");
					$("#index").css("opacity", "1");
					$("#index").css("display", "");
					window.loading_state = false;
					closeHome();
				}, 2000);
			}
			window.index_state = false;
			window.settings_state = false;
			window.home_state = false;
			window.profile_state = true;
			window.album_state = false;
			window.message_state = false;
			window.loading_state = false;
			$("#index").click(function () {
				if (window.settings_state || window.loading_state) {
					return;
				}
				if (window.index_state) {
					closeIndex();
				} else {
					openIndex();
				}
			});
			$("#settings").click(function () {
				if (window.index_state || window.loading_state) {
					return;
				}
				if (window.settings_state) {
					closeSettings();
				} else {
					openSettings();
				}
			});
			$("#home").click(function () {
				if (window.index_state || window.settings_state) {
					return;
				}
				if (window.home_state) {
					closeHome();
				} else {
					openHome();
				}
			});
			$("#profile").click(function () {
				if (!window.profile_state) {
					openProfile();
				}
			});
			$("#album").click(function () {
				if (!window.album_state) {
					openAlbum();
				}
			});
			$("#message").click(function () {
				if (!window.message_state) {
					openMessage();
				}
			});
			$("#show_top_back").click(function () {
				$("#page_box").css({"display":""});
				$("#album_show_box").removeClass("show");
			});
			$(window).resize(function () {
				var tmp_h = $(window).height();
				var tmp_w = $(window).width();
				var size_rate = tmp_w/tmp_h;
				var pic_size_rate = $("#album_show_pic").width()/$("#album_show_pic").height();
				if (pic_size_rate > size_rate) {
					$("#album_show_pic").css({"height":"", "width":tmp_w + "px"});
				} else {
					$("#album_show_pic").css({"height":tmp_h + "px","width":""});
				}
			});
		</script>
	</body>
</html>